<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drawing a monster in Canvas</title>
    <style>
        canvas {
            border: 2px solid black;
        }
    </style>
</head>
<body>
    <canvas id="myCanvas" width="500" height="500"></canvas>

    <script>
        let canvas, ctx, w,h;

        let ball = {
            x: 100,
            y: 100,
            radius : 15,
            color : 'green',
            speedX : 2,
            speedY : 1
        };
        let player =  {
            x : 10,
            y: 10,
            width : 20,
            height : 20,
            color : 'red'
        };

      
        

        canvas = document.querySelector('#myCanvas');
        ctx = canvas.getContext('2d');

        w = canvas.width;
        h = canvas.height;
        drawCircle(ball);
        drawPlayer(player);

        moveBall(ball);
  
        // ask for a new animation frame
        requestAnimationFrame(mainLoop);


        function moveBall(b) {
        b.x += b.speedX;
        b.y += b.speedY;
        
        testCollisionBallWithWalls(b);
        }

        function testCollisionBallWithWalls(b) {
            // COLLISION WITH VERTICAL WALLS ?
            if((b.x + b.radius) > w) {
            // the ball hit the right wall
            // change horizontal direction
            b.speedX = -b.speedX;
            
            // put the ball at the collision point
            b.x = w - b.radius;
        } else if((b.x -b.radius) < 0) {
            // the ball hit the left wall
            // change horizontal direction
            b.speedX = -b.speedX;
            
            // put the ball at the collision point
            b.x = b.radius;
        }
        
        // COLLISIONS WTH HORIZONTAL WALLS ?
        // Not in the else as the ball can touch both
        // vertical and horizontal walls in corners
        if((b.y + b.radius) > h) {
            // the ball hit the right wall
            // change horizontal direction
            b.speedY = -b.speedY;
            
            // put the ball at the collision point
            b.y = h - b.radius;
        } else if((b.y -b.radius) < 0) {
            // the ball hit the left wall
            // change horizontal direction
            b.speedY = -b.speedY;
            
            // put the ball at the collision point
            b.Y = b.radius;
        }  
        }



        function drawPlayer(ply){
            ctx.save();
            ctx.translate(ply.x, ply.y);

            ctx.fillStyle = ply.color;

            ctx.fillRect(0,0, ply.width, ply.height);

            ctx.restore();
        }


        function drawCircle(crcl){
            ctx.save();

            ctx.translate(crcl.x, crcl.y);

            ctx.fillStyle = crcl.color;

            ctx.beginPath();
            ctx.arc(0, 0, crcl.radius, 0, 2*Math.PI);
            ctx.fill();
            ctx.restore();

        }

    </script>
</body>
</html>